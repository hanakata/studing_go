第1章 チュートリアル

最初はHello Worldから。
一回実行できればよいのであればgo runで。2回以上実行したければgo buildで。
書いたコードにはとりあえずgo fmtを実行すること。
コマンド例は以下。
gofmt -d main.go
-dは差分表示。

goimportは必要に応じてインポート宣言の挿入と削除を行ってくれる。
通常では入っていないものなので以下コマンドで入れること。
go get golang.org/x/tools/cmd/goimports

■コマンドライン引数
プログラミングは何らかの入力を処理して出力を生成するもの。
osパッケージ
プラットフォームから独立した形式でオペレーティングシステムを扱うための関数と値を提供。
コマンドライン引数はosパッケージの一部であるArgsという名前の変数でプログラムから利用できる。
変数os.Argsは文字列のスライス。スライスは動的に大きさが変わる配列。
os.Argsの最初の要素であるos.Args[0]はコマンド自身の名前。他の要素はプログラム実行時に渡された引数。

コメントは//で始まり慣習によりパッケージ宣言の直前のコメントにパッケージの説明を記載する。
変数は初期化でき、値を与えなければ初期値としてゼロ値が入る。
ゼロ値は数値型だと0、文字列だと""が入る。
+=は代入演算子
:=は省略変数宣言
for文はデータ型の値の範囲を繰り返すことも出来る。
rangeはインデックスとそのインデックスの値を生成する。
_はブランク識別子。使わない値を入れる変数。

変数を定義する場合、どれを使うべきか。
s := ""は最も簡潔ではあるがパッケージレベルの変数には使えない。
var s stringは文字列に対するゼロ値に頼っている。
var s = ""は複数の変数を宣言するときを除いてほぼ使われない。
var s string = ""は変数の型について明示的であり、変数と初期値が同じ型でない場合に必要。
実際に使うべき定義方法は1つめと2つめ。
+=文は古い文字列、空白文字、新たな引数を連結して文字列をsに代入する。
sの古い内容は使われないのでそのうちガベージコレクトされる。
関係するデータ量が大きい場合にはこの方法は高くつくので効率的な解決方法としてstringパッケージのjoin関数を使うこと。

■重複した行を見つける
ファイルのコピー、表示、検索、ソート、集計などを行うプログラムは類似した構造を持つ。
その構造とは？
入力に対してループし個々の要素に対して何らかの計算を行い、都度、もしくは最後に出力生成する。

forと同じくifも()は必要ない。
マップはキーと値の組の集まりを保持。キーはその値が==で比較できる型であればなんでも良い。基本は文字列。
counts[input.Text()]++は以下の内容と同じ。
line := input.Text()
counts[line] = counts[line] + 1
マップは指定されたキーを保持していなくても良い。行が新しく現れると右辺のcounts[line]はゼロ値に評価される。
マップの繰り返しは順序だっていない。なので順番どおり取れるかは不明。

bufioパッケージは入出力を効率的かつ便利に行う。
最も役に立つ機能はScannerで入力を読み込み行や単語に分解する。
行で表されているものはScannerを使うと最も簡単。
以下の宣言だと標準入力から読み込むようになる。
input := bufio.NewScanner(os.stdin)
呼び出し方はinput.Scan()
読み込んだら行末から改行コードを取り除く。行があればtrue、なければfalseを返す。
printfはCと一緒。

os.Open関数は2つ値を返す。1つめは開かれたファイル、2つめはerrorの型。
errorがnilと等しければ問題ない。
ファイルの最後まで開ききったらCloseで閉じる。

関数と他のパッケージレベルのエンティティはどういった順序でも問題ない。
bufio.Scanner、ioutil.ReadFile、ioutil.WriteFileは裏で*os.FileのReadメソッドとWriteメソッドを利用している。
ただこれらの低レベルのルーチンへ直接アクセスする必要はほぼなく、bufioなどが提供する高レベルの関数を使った方が使いやすい。

■GIFアニメーション
ビットマップ画像のシーケンスをGIFアニメーションとしてエンコードすることが出来る。
image/colorのようにパスが複数の要素から構成されるパッケージをインポートした場合、最後の要素の名前でパッケージを参照する。
constは定数。定数はパッケージレベルで書くことも関数レベルで書くことも出来る。
var palette = []color.Color{color.White, color.Black}←スライス
anim := gif.GIF{LoopCount: nframes}←構造体
構造体は大半が異なる型を持つフィールドと呼ばれる値の集まり。ひとつの単位として扱える単一オブジェクトにまとめられている。

関数lissajuosは個々2つのネストしたループを持っている。外側はnframesに指定した回数繰り返し、
それぞれの繰り返しでアニメーションの1フレームを生成する。
